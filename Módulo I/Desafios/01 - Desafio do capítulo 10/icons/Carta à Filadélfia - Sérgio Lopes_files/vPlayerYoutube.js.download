$(vgl.lib().vPlayer).run(function(){this.youtube={Init:function(e){var t=[],a=0,n=!1,r="https://cdn.vagalu.me",o=function(n){var r=$("#"+e.id),o=this;$(n).off(".youtube").on("pause.youtube",function(){r.trigger("pause.core")}).on("progress.youtube",function(e,t){r.trigger("buffering.core",t)}).on("timeupdate.youtube",function(e,t,a){r.trigger("timeupdate.core",[t,a])}).on("play.youtube",function(){r.trigger("play.core")}).on("ended.youtube",function(){r.trigger("ended.core")}).on("canplay.youtube",function(){r.trigger("canplay.core")}).one("playing.youtube",function(){o.setVolume(e.modules.getVolumeByLocalStorage()),r.trigger("playing.core")}).one("startads.youtube",function(){r.trigger("startadsyoutube.core")}).one("endads.youtube",function(){r.trigger("endadsyoutube.core")}).on("error.youtube",function(n,r){e.modules.saveLogError(r),t&&t[a+1]?(a++,o.startYoutubeConf()):o.loadOtherVideoByError()})};this.loadOtherVideoByError=function(){var t=new e.modules.objValidSourceAndCount;if(t.arraySongs.length&&!t.arraySongs.hasOwnProperty(t.count))if(t.count=0,e.defaults.currentPlaylist.length>1){var a="<p>Estamos passando para a pr&oacute;xima m&uacute;sica</p>";e.modules.notify({html:a,time:2500,force:!0}),e.front.loading.stop(),t.clear(),setTimeout(function(){e.core.next()},3e3)}else a="<p>N&atilde;o foi poss&iacute;vel tocar o v&iacute;deo do youtube</p>",e.modules.notify({html:a,notTime:!0,force:!0});else e.modules.getValidSource()},this.loadPlayer=function(){t=e.modules.getObjSong().source.split(","),a=0,this.startYoutubeConf()},this.startYoutubeConf=function(){var n=$(e.target),r=n.data("media-youtube"),s=t[a]?t[a]:e.modules.getObjSong().source;r?r.setSrc(s):(e.front.render({action:"contentPlayer"}),r=i("playerYoutube_"+e.id,s),n.data("media-youtube",r)),$.proxy(o,this,[r])()},this.isPlaying=function(){var t=e.target.data("media-youtube");return"playing"==(!!t&&t.state)},this.play=function(){var t=e.target.data("media-youtube");t&&t.play()},this.pause=function(){var t=e.target.data("media-youtube");t&&t.pause()},this.stop=function(){var t=e.target.data("media-youtube");t&&t.stop(),$(t).off(".youtube")},this.setVolume=function(t){var a=e.target.data("media-youtube");a&&a.setVolume(t)},this.getVolume=function(t){var a=e.target.data("media-youtube");return!!a&&a.getVolume()},this.setProgressbar=function(t){var a=e.target.data("media-youtube");a&&a.setCurrentTime(t)},this.getDuration=function(){var t=e.target.data("media-youtube");return!!t&&t.getDuration()};var i=function(t,a){function o(){$(".mob-preview").length&&$(".mob-preview").remove()}var i,s,u={},l=function(){var e=$(this);this.state="canplay",e.triggerHandler("canplay"),f(this),u.duration=!1,u.playerInstance.postMessage({status:"getDuration"},r)},d=!1,c=!1,g=!1,p=!1,y=function(t,a){var n="object"==typeof t?t.data:t,r=$(this),i=this;switch(n){case-1:g=!1,f(this),this.state="canplay",r.triggerHandler("canplay"),clearTimeout(c),c=setTimeout(function(){"canplay"==i.state&&"youtube"==e.modules.getObjSong().service&&e.target.find(".vContentPlayer").is(":visible")&&e.defaults.currentSong!=e.modules.getNextValid(e.defaults.repeat)&&(i.stop(),(new e.modules.objValidSourceAndCount).count=0,e.youtube.loadPlayer(e))},1e4);break;case 0:this.state="ended",r.triggerHandler("ended");break;case 1:t&&t.duration&&(u.duration=t.duration),this.state="playing",r.triggerHandler("play"),r.triggerHandler("playing"),f(this),o(),g=!0,clearInterval(d),p&&(r.triggerHandler("endads"),p=!1),(new e.modules.objValidSourceAndCount).clear();break;case 2:this.state="pause",r.triggerHandler("pause");break;case 3:this.state="buffering",r.triggerHandler("buffering"),o(),g||(d=setInterval(function(){i.getCurrentTime(function(e){"buffering"==i.state&&e&&(r.triggerHandler("startads"),p=!0,clearInterval(d))})},1e3));break;case 5:l()}},m=function(t){t&&5==t.data?e.modules.getObjSong():$(this).triggerHandler("error",t.data)},v=!1,f=function(e){clearInterval(v),v=setInterval(function(){try{var t=e.playerInstance.getVideoLoadedFraction();if(t){1!=t&&"ended"!=e.state||clearInterval(v);var a=100*t;$(e).triggerHandler("progress",[a])}}catch(e){}},800)},w=function(e){if(e&&e.data){var t=e.data;switch(t.status){case"infoDelivery":var a=t.value.info;a.currentTime&&$(u).triggerHandler("timeupdate",[a.currentTime||0,u.getDuration()||0])}}};function b(e){if(e.origin==r)switch(e.data.status){case"onReady":$.proxy(l,u)();break;case"onStateChange":$.proxy(y,u)(e.data.state);break;case"onError":$.proxy(m,u)(e.data.error);break;case"getDuration":u.duration=e.data.value}}return window.addEventListener?(window.lastEventListerYoutube&&window.removeEventListener("message",window.lastEventListerYoutube,!1),window.addEventListener("message",w)):(window.lastEventListerYoutube&&window.detachEvent("message",window.lastEventListerYoutube,!1),window.attachEvent("onmessage",w)),window.lastEventListerYoutube=w,u.setSrc=function(e){e&&u.playerInstance&&u.playerInstance.postMessage({status:"loadVideoById",value:e},r)},u.play=function(){u.playerInstance&&u.playerInstance.postMessage({status:"playVideo"},r)},u.pause=function(){u.playerInstance&&u.playerInstance.postMessage({status:"pauseVideo"},r)},u.stop=function(){if(u.playerInstance)try{u.playerInstance.postMessage({status:"stopVideo"},r),u.playerInstance.postMessage({status:"clearVideo"},r),clearInterval(intervalCurrentTime),clearInterval(v)}catch(e){}},u.setVolume=function(e){u.playerInstance&&u.playerInstance.postMessage({status:"setVolume",value:100*e},r)},u.getVolume=function(e){function t(t){t.origin==r&&"getVolume"==t.data.status&&e(t.data.value)}u.playerInstance&&(window.addEventListener?(window.lastEventListerVolume&&window.removeEventListener("message",window.lastEventListerVolume,!1),window.addEventListener("message",t)):(window.lastEventListerVolume&&window.detachEvent("message",window.lastEventListerVolume,!1),window.attachEvent("onmessage",t)),window.lastEventListerVolume=t)},u.getDuration=function(){if(u.playerInstance)return u.duration},u.getCurrentTime=function(e){function t(t){t.origin==r&&"getCurrentTime"==t.data.status&&e(t.data.value)}u.playerInstance||e(),u.playerInstance.postMessage({status:"getCurrentTime"},r),window.addEventListener?(window.lastEventListerTime&&window.removeEventListener("message",window.lastEventListerTime,!1),window.addEventListener("message",t)):(window.lastEventListerTime&&window.detachEvent("message",window.lastEventListerTime,!1),window.attachEvent("onmessage",t)),window.lastEventListerTime=t},u.setCurrentTime=function(e){u.playerInstance&&u.playerInstance.postMessage({status:"seekTo",value:e},r)},window.addEventListener?(window.lastEventLister&&window.removeEventListener("message",window.lastEventLister,!1),window.addEventListener("message",b)):(window.lastEventLister&&window.detachEvent("message",window.lastEventLister,!1),window.attachEvent("onmessage",b)),window.lastEventLister=b,i={controls:"mobile"==e.defaults.type?1:0,playsinline:"mobile"==e.defaults.type?1:0,iv_load_policy:3,showinfo:0,egm:0,rel:0,autoplay:1,modestbranding:1,origin:r,enablejsapi:1,wmode:"transparent"},s=r+"/iframe/playerProxy.html?videoID="+a+"&playerVars="+encodeURIComponent(JSON.stringify(i)),$("#"+t).html(""),$("#"+t).append('<iframe id=playerProxy allow="autoplay; fullscreen; encrypted-media" title="YouTube video player" frameborder="0" allowfullscreen=1 src="'+s+'" style="width: 100%; height: 100%;"></iframe>'),n||function(){if("mobile"==e.defaults.type){var t=$("#artHeaderTitle"),a=t.find("h1").text();$("#songPlay.vTeaser span").attr("data-bg"),$(e.target).find(".vPlayer").append(`\n\t\t\t\t\t\t<div class="mob-preview stations">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<img class="fmIcon" src="/img/logos/vglfm-app-icon.png" alt="Vagalume.FM">\n\t\t\t\t\t\t\t\t<span>Ouça estações relacionadas a <b>${a}</b> no <b>Vagalume.FM</b></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ul class="overflow">\n\t\t\t\t\t\t\t\t${function(){var e=function(){var e=$(".vTeaser").find("ul > li"),t=!1;if(e.length){t=[];for(var a=0;a<e.length;a++){var n=$(e[a]),r={url:n.find("> a").attr("href"),img:n.find("picture").css("background-image").replace("url(","").replace(")","").replace(/\"/gi,"")};t.push(r)}}return t}(),t="";if(e.length)for(var a=0;a<e.length;a++){var n=e[a];t+='<li><a href="'+n.url+'"><picture class="square" style="background-image: url('+n.img+');"></picture></a></li>'}return t}()}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`),n=!0}}(),u.playerInstance=$("#playerProxy")[0].contentWindow,u};this.loadPlayer()}}});